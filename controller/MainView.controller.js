sap.ui.define(["./BaseController","sap/m/MessageToast","sap/ui/model/json/JSONModel"],function(e,s,t){"use strict";return e.extend("com.myorg.myUI5App.controller.MainView",{onInit:function(){this.setModel(new t({username:"custb2b.test1@sirsafety.it",password:"SIRtest22",isDarkMode:true}),undefined)},onLoginPress:function(){const e=this.getRouter();const t=this.getOwnerComponent().getModel("oData");const{username:o,password:i}=this.getModel().getData();const n=`Basic ${btoa(`${o}:${i}`)}`;t.setHeaders({Authorization:n});t.read("/login",{success:(o,i)=>{const{token:n}=this.parseResponseBody(i);t.setHeaders({Authorization:`Bearer ${n}`});s.show("Login Successful");e.navTo("Home")},error:e=>{s.show(this.parseMessage(e.response)||"Login Failed")}})},onSwitchTheme:function(e){window.history.replaceState("","",this._updateURLTheme(window.location.href,"$sap-ui-theme",e.getParameter("state")))},_updateURLTheme:function(e,s,t){const o=e.split("?")[1];if(!o){e=`${e}?${s}=sap_fiori_3`}else{e=t?e.replace("sap_fiori_3","sap_fiori_3_dark"):e.replace("sap_fiori_3_dark","sap_fiori_3")}return e}})});