sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/core/UIComponent","sap/ui/core/routing/History"],function(e,t,o,i,r){"use strict";return e.extend("com.myorg.myUI5App.controller.DetailProduct",{onInit:function(){var e={SelectedColor:"black",SelectedName:"",Colors:[{Name:"ARANCIO HV",id:"darkorange"},{Name:"BIANCO",id:"white"},{Name:"AZZURRO",id:"blue"},{Name:"VERDE",id:"green"},{Name:"GRIGIO MELANGE",id:"grey"},{Name:"NAVY",id:"black"},{Name:"GIALLO HV",id:"yellow"}]};var o=new t(e);this.getView().setModel(o,"dropDownModel");debugger;this._oRouter=this.getOwnerComponent().getRouter();this._oRouter.getRoute("DetailProduct").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(){debugger;var e=this.byId("iconTabDatiGen").getKey();this.byId("idIconTabBarNoIcons").setSelectedKey("dati")},onOpenColor:function(e){this.getView().setModel(this.getView().getModel("dropDownModel"));debugger;var t=e.getSource(),i=this.getView();if(!this._pPopover){this._pPopover=o.load({id:i.getId(),name:"com.myorg.myUI5App.view.fragment.SelectColor",controller:this}).then(function(e){i.addDependent(e);return e})}debugger;this._pPopover.then(function(e){e.openBy(t)})},onChooseColor:function(e){debugger;var t=e.getSource();var o=t.getBindingContext();var i=o.getPath();var r=this.getView().getModel().getProperty(i).id;this.getView().getModel().setProperty("/SelectedColor",r);var l=this.getView().getModel().getProperty(i).Name;this.getView().getModel().setProperty("/SelectedName",l);this.byId("colors").close();var g=this.getView().byId("coloreFinale").getText();var a=this.getView().byId("totalItems2").getText();if(g!==""&&a>0){this.getView().getModel("dropDownModel").setProperty("/reviewButtonEnabled",true);this.getView().getModel("dropDownModel").setProperty("/SelectedQuantitaStorico",false)}else{this.getView().getModel("dropDownModel").setProperty("/reviewButtonEnabled",false)}sap.ui.getCore().byId("colors").destroy()},onChangeValueItems:function(){debugger;var e=0;var t=this.getView().getModel("Clothing").getProperty("/detail/taglieObj");var o=this.getView().getModel("Clothing").getProperty("/detail/taglieObj1");for(let o=0;o<t.length;o++){var i=t[o].quantita;var r=e+=i}if(o){var l=0;for(let e=0;e<o.length;e++){var g=o[e].quantita;var a=l+=g}var d=r+a;this.getView().getModel("Clothing").setProperty("/detail/totale",d)}else{this.getView().getModel("Clothing").setProperty("/detail/totale",r)}var n=this.getView().getModel("Clothing").getProperty("/detail/prezzo");if(d){var s=d*n;this.getView().getModel("Clothing").setProperty("/detail/calcolo",s.toFixed(2))}else{var h=r*n;this.getView().getModel("Clothing").setProperty("/detail/calcolo",h.toFixed(2))}var c=this.getView().getModel("Clothing").getProperty("/detail/prezzo3");if(d){var p=d*c;this.getView().getModel("Clothing").setProperty("/detail/calcolo3",p.toFixed(2))}else{var u=r*c;this.getView().getModel("Clothing").setProperty("/detail/calcolo3",u.toFixed(2))}},onChangeValue:function(){debugger;var e=this.getView().getModel("Clothing").getProperty("/sizes/calcolo");var t=this.getView().getModel("Clothing").getProperty("/detail/sconto");var o=this.getView().getModel("Clothing").getProperty("/detail/totale");var i=this.getView().getModel("Clothing").getProperty("/detail/prezzoFissoModel");var r=i*o;var l=r*t/100;var g=r-l;this.getView().getModel("Clothing").setProperty("/detail/calcolo",g.toFixed(2));var a=g/o;this.getView().getModel("Clothing").setProperty("/detail/prezzo",a.toFixed(2))},onChangeValue3:function(){debugger;var e=this.getView().getModel("Clothing").getProperty("/detail/sconto3");var t=this.getView().getModel("Clothing").getProperty("/detail/totale");var o=this.getView().getModel("Clothing").getProperty("/detail/prezzoFissoModel3");var i=o*t;var r=i*e/100;var l=i-r;this.getView().getModel("Clothing").setProperty("/detail/calcolo3",l.toFixed(2));var g=l/t;this.getView().getModel("Clothing").setProperty("/detail/prezzo3",g.toFixed(2))},onBackProductDetail:function(){debugger;var e=i.getRouterFor(this);e.navTo("SearchProducts",{},true)},onCloseColor:function(){this.byId("colors").close()}})});