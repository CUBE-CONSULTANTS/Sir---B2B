sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/core/UIComponent","sap/ui/core/routing/History"],function(e,t,o,r,a){"use strict";return e.extend("com.myorg.myUI5App.controller.DetailProduct",{onInit:function(){var e={keyTabBar:"dati",SelectedColor:"black",SelectedName:"",Colors:[{Name:"ARANCIO HV",id:"darkorange"},{Name:"BIANCO",id:"white"},{Name:"AZZURRO",id:"blue"},{Name:"VERDE",id:"green"},{Name:"GRIGIO MELANGE",id:"grey"},{Name:"NAVY",id:"black"},{Name:"GIALLO HV",id:"yellow"}]};var o=new t(e);this.getView().setModel(o,"dropDownModel");this._oRouter=this.getOwnerComponent().getRouter();this._oRouter.getRoute("DetailProduct").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){debugger;var t=this.getView().getModel("dropDownModel").getProperty("/keyTabBar");this.byId("idIconTabBarNoIcons").setSelectedKey(t)},onOpenColor:function(e){this.getView().setModel(this.getView().getModel("dropDownModel"));var t=e.getSource(),r=this.getView();if(!this._pPopover){this._pPopover=o.load({id:r.getId(),name:"com.myorg.myUI5App.view.fragment.SelectColor",controller:this}).then(function(e){r.addDependent(e);return e})}this._pPopover.then(function(e){e.openBy(t)})},onChooseColor:function(e){var t=this.getView().getModel();var o=this.getView().getModel("dropDownModel");var r=e.getSource();var a=r.getBindingContext();var i=a.getPath();var l=t.getProperty(i).id;t.setProperty("/SelectedColor",l);var s=t.getProperty(i).Name;t.setProperty("/SelectedName",s);this.byId("colors").close();var d=this.getView().byId("coloreFinale").getText();var n=this.getView().byId("totalItems2").getText();if(d!==""&&n>0){o.setProperty("/reviewButtonEnabled",true);o.setProperty("/SelectedQuantitaStorico",false)}else{o.setProperty("/reviewButtonEnabled",false)}sap.ui.getCore().byId("colors").destroy()},onChangeValueItems:function(){var e=0;var t=this.getView().getModel("Clothing");var o=t.getProperty("/detail/taglieObj");var r=t.getProperty("/detail/taglieObj1");for(let t=0;t<o.length;t++){var a=o[t].quantita;var i=e+=a}if(r){var l=0;for(let e=0;e<r.length;e++){var s=r[e].quantita;var d=l+=s}var n=i+d;t.setProperty("/detail/totale",n)}else{t.setProperty("/detail/totale",i)}var p=t.getProperty("/detail/prezzo");if(n){var c=n*p;t.setProperty("/detail/calcolo",c.toFixed(2))}else{var g=i*p;t.setProperty("/detail/calcolo",g.toFixed(2))}var u=t.getProperty("/detail/prezzo3");if(n){var v=n*u;t.setProperty("/detail/calcolo3",v.toFixed(2))}else{var y=i*u;t.setProperty("/detail/calcolo3",y.toFixed(2))}var h=t.getProperty("/detail/totale");var P=this.byId("stepInput3");var m=this.byId("stepInput5");var I=t.getProperty("/detail/prezzoFissoModel");var b=t.getProperty("/detail/prezzoFissoModel3");Number(h);if(h<=0){t.setProperty("/detail/sconto",0);P.setValue(I);t.setProperty("/detail/sconto3",0);m.setValue(b)}},onChangeValue:function(){var e=this.getView().getModel("Clothing");var t=e.getProperty("/detail/calcolo");Number(t);if(t<=0){new sap.m.MessageToast.show("Aumentare la quantità dei prodotti");this.byId("stepInput4").setValue(0);this.byId("stpInput3").setValue("Clothing>/detail/prezzo")}var o=e.getProperty("/detail/sconto");var r=e.getProperty("/detail/totale");var a=e.getProperty("/detail/prezzoFissoModel");var i=a*r;var l=i*o/100;var s=i-l;e.setProperty("/detail/calcolo",s.toFixed(2));var d=s/r;e.setProperty("/detail/prezzo",d.toFixed(2))},onChangeValue3:function(){var e=this.getView().getModel("Clothing");var t=e.getProperty("/detail/calcolo3");Number(t);if(t<=0){new sap.m.MessageToast.show("Aumentare la quantità dei prodotti");this.byId("list3Input").setValue(0);this.byId("stpInput5").setValue("Clothing>/detail/prezzo3")}else{var o=e.getProperty("/detail/sconto3");var r=e.getProperty("/detail/totale");var a=e.getProperty("/detail/prezzoFissoModel3");var i=a*r;var l=i*o/100;var s=i-l;e.setProperty("/detail/calcolo3",s.toFixed(2));var d=s/r;e.setProperty("/detail/prezzo3",d.toFixed(2))}},onBackProductDetail:function(){var e=r.getRouterFor(this);e.navTo("SearchProducts",{},true)},onCloseColor:function(){this.byId("colors").close()}})});