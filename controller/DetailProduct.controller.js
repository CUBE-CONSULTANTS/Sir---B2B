sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/core/UIComponent","sap/ui/core/routing/History"],function(e,t,o,i,r){"use strict";return e.extend("com.myorg.myUI5App.controller.DetailProduct",{onInit:function(){var e={keyTabBar:"dati",SelectedColor:"black",SelectedName:"",Colors:[{Name:"ARANCIO HV",id:"darkorange"},{Name:"BIANCO",id:"white"},{Name:"AZZURRO",id:"blue"},{Name:"VERDE",id:"green"},{Name:"GRIGIO MELANGE",id:"grey"},{Name:"NAVY",id:"black"},{Name:"GIALLO HV",id:"yellow"}]};var o=new t(e);this.getView().setModel(o,"dropDownModel");this._oRouter=this.getOwnerComponent().getRouter();this._oRouter.getRoute("DetailProduct").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){debugger;var t=this.getView().getModel("dropDownModel").getProperty("/keyTabBar");this.byId("idIconTabBarNoIcons").setSelectedKey(t)},onOpenColor:function(e){this.getView().setModel(this.getView().getModel("dropDownModel"));var t=e.getSource(),i=this.getView();if(!this._pPopover){this._pPopover=o.load({id:i.getId(),name:"com.myorg.myUI5App.view.fragment.SelectColor",controller:this}).then(function(e){i.addDependent(e);return e})}this._pPopover.then(function(e){e.openBy(t)})},onChooseColor:function(e){var t=e.getSource();var o=t.getBindingContext();var i=o.getPath();var r=this.getView().getModel().getProperty(i).id;this.getView().getModel().setProperty("/SelectedColor",r);var l=this.getView().getModel().getProperty(i).Name;this.getView().getModel().setProperty("/SelectedName",l);this.byId("colors").close();var a=this.getView().byId("coloreFinale").getText();var g=this.getView().byId("totalItems2").getText();if(a!==""&&g>0){this.getView().getModel("dropDownModel").setProperty("/reviewButtonEnabled",true);this.getView().getModel("dropDownModel").setProperty("/SelectedQuantitaStorico",false)}else{this.getView().getModel("dropDownModel").setProperty("/reviewButtonEnabled",false)}sap.ui.getCore().byId("colors").destroy()},onChangeValueItems:function(){debugger;var e=0;var t=this.getView().getModel("Clothing").getProperty("/detail/taglieObj");var o=this.getView().getModel("Clothing").getProperty("/detail/taglieObj1");for(let o=0;o<t.length;o++){var i=t[o].quantita;var r=e+=i}if(o){var l=0;for(let e=0;e<o.length;e++){var a=o[e].quantita;var g=l+=a}var d=r+g;this.getView().getModel("Clothing").setProperty("/detail/totale",d)}else{this.getView().getModel("Clothing").setProperty("/detail/totale",r)}var s=this.getView().getModel("Clothing").getProperty("/detail/prezzo");if(d){var n=d*s;this.getView().getModel("Clothing").setProperty("/detail/calcolo",n.toFixed(2))}else{var h=r*s;this.getView().getModel("Clothing").setProperty("/detail/calcolo",h.toFixed(2))}var p=this.getView().getModel("Clothing").getProperty("/detail/prezzo3");if(d){var c=d*p;this.getView().getModel("Clothing").setProperty("/detail/calcolo3",c.toFixed(2))}else{var u=r*p;this.getView().getModel("Clothing").setProperty("/detail/calcolo3",u.toFixed(2))}var y=this.getView().getModel("Clothing").getProperty("/detail/totale");var w=this.byId("stepInput3");var v=this.byId("stepInput5");var M=this.getView().getModel("Clothing").getProperty("/detail/prezzoFissoModel");var V=this.getView().getModel("Clothing").getProperty("/detail/prezzoFissoModel3");debugger;Number(y);if(y<=0){this.getView().getModel("Clothing").setProperty("/detail/sconto",0);w.setValue(M);this.getView().getModel("Clothing").setProperty("/detail/sconto3",0);v.setValue(V)}},onChangeValue:function(){debugger;var e=this.getView().getModel("Clothing").getProperty("/detail/calcolo");Number(e);if(e<=0){new sap.m.MessageToast.show("Aumentare la quantità dei prodotti");this.byId("stepInput4").setValue(0);this.byId("stpInput3").setValue("Clothing>/detail/prezzo")}var t=this.getView().getModel("Clothing").getProperty("/detail/sconto");var o=this.getView().getModel("Clothing").getProperty("/detail/totale");var i=this.getView().getModel("Clothing").getProperty("/detail/prezzoFissoModel");var r=i*o;var l=r*t/100;var a=r-l;this.getView().getModel("Clothing").setProperty("/detail/calcolo",a.toFixed(2));var g=a/o;this.getView().getModel("Clothing").setProperty("/detail/prezzo",g.toFixed(2))},onChangeValue3:function(){var e=this.getView().getModel("Clothing").getProperty("/detail/calcolo3");Number(e);if(e<=0){new sap.m.MessageToast.show("Aumentare la quantità dei prodotti");this.byId("list3Input").setValue(0);this.byId("stpInput5").setValue("Clothing>/detail/prezzo3")}else{var t=this.getView().getModel("Clothing").getProperty("/detail/sconto3");var o=this.getView().getModel("Clothing").getProperty("/detail/totale");var i=this.getView().getModel("Clothing").getProperty("/detail/prezzoFissoModel3");var r=i*o;var l=r*t/100;var a=r-l;this.getView().getModel("Clothing").setProperty("/detail/calcolo3",a.toFixed(2));var g=a/o;this.getView().getModel("Clothing").setProperty("/detail/prezzo3",g.toFixed(2))}},onBackProductDetail:function(){var e=i.getRouterFor(this);e.navTo("SearchProducts",{},true)},onCloseColor:function(){this.byId("colors").close()}})});